"use strict";!function(){var e=27,t=3e4,n=160,o=function(t){return t.keyCode&&t.keyCode===e},r=document.querySelector("#write-us");if(r){var i=document.querySelector(".modal-content-write-us"),l=document.querySelector("#map-btn"),a=document.querySelector(".modal-content-map"),c=i.querySelector(".modal-content-close"),u=i.querySelector("form"),s=a.querySelector(".modal-content-close"),d=u.querySelector("#write-us-name"),f=u.querySelector("#write-us-email"),v=u.querySelector("#write-us-text"),m=localStorage.getItem("name"),L=localStorage.getItem("e-mail"),y=[d,f,v],p=function(e){e.preventDefault(),i.classList.remove("invisible"),i.classList.add("float-write-us"),setTimeout(function(){i.classList.remove("float-write-us")},1e3),m||L?(d.value=m,f.value=L,v.focus()):d.focus(),c.addEventListener("click",S),window.addEventListener("keydown",w)},S=function(e){e.preventDefault(),i.classList.add("invisible"),c.removeEventListener("click",S),window.removeEventListener("keydown",w)},w=function(e){o(e)&&S(e)},E=function(){i.classList.add("modal-error"),setTimeout(function(){i.classList.remove("modal-error")},1e3)},g=function(){y.forEach(function(e){e.value?(e.placeholder=e.value,e.style="border: 2px solid #d7dcde"):(e.placeholder="Обязательное поле!",e.style="border: 2px solid #ee3643",E())})},q=function(e){d.value&&f.value&&v.value?(localStorage.setItem("name",d.value),localStorage.setItem("e-mail",f.value)):(e.preventDefault(),u.addEventListener("change",g),g())},x=function(e){e.preventDefault(),a.classList.remove("invisible"),s.addEventListener("click",k),window.addEventListener("keydown",b)},k=function(e){e.preventDefault(),a.classList.add("invisible")},b=function(e){o(e)&&k(e)};r.addEventListener("click",p),u.addEventListener("submit",q),l.addEventListener("click",x)}var D=document.querySelector(".catalog-items");if(D){var h=document.querySelector(".modal-content-add-to-cart"),I=h.querySelector(".modal-content-close"),X=function(e){e.preventDefault(),h.classList.remove("invisible"),I.addEventListener("click",C),window.addEventListener("keydown",T)},C=function(e){e.preventDefault(),h.classList.add("invisible"),I.removeEventListener("click",C),window.removeEventListener("keydown",T)},T=function(e){o(e)&&C(e)},M=function(e){for(var t=e.target;t!==D;){if(t.classList.contains("btn-cart"))return void X(e);t=t.parentNode}};D.addEventListener("click",M)}var N=document.querySelector(".catalog-filters");if(N){var j=N.querySelector(".bar"),z=N.querySelector(".min-toggle"),A=N.querySelector(".max-toggle"),B=N.querySelector("#min-price"),F=N.querySelector("#max-price"),G=function(e){return e.value/t*n+20},H=function(e){return Math.floor((e.offsetLeft-20)/n*t)},J=function(e,n,o,r,i){e.preventDefault();var l={x:e.clientX},a=function(e){e.preventDefault();var t={x:l.x-e.clientX};l={x:e.clientX},n.style.left=n.offsetLeft-t.x+"px"},c=function(e){n.offsetLeft>=20&&n.offsetLeft<=180?(a(e),n.classList.contains("min-toggle")?(o.value=H(n),r(n.offsetLeft,i.offsetLeft)):(o.value=H(n),r(i.offsetLeft,n.offsetLeft))):n.offsetLeft<20?(n.style.left="20px",o.value="0"):(n.style.left="180px",o.value=t)},u=function(e){e.preventDefault(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)},K=function(e,t){var n=(t-e)/180*100-10;z.style="left: "+e.toString()+"px;",A.style="left: "+t.toString()+"px;",j.style="margin-left: "+e.toString()+"px; width: "+n+"%;"},O=function(e,t){var n=G(e),o=G(t);K(n,o)};B.addEventListener("change",function(){B.value<0?B.value=0:B.value>3e4&&(B.value=29999)}),F.addEventListener("change",function(){F.value<0?F.value=1:F.value>3e4&&(F.value=3e4)}),N.addEventListener("change",function(){O(B,F)}),z.addEventListener("mousedown",function(e){J(e,z,B,K,A)}),A.addEventListener("mousedown",function(e){J(e,A,F,K,z)})}}();
